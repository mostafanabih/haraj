!function(a){"use strict";a.extend(a.calendars.regionalOptions[""],{invalidArguments:"Invalid arguments",invalidFormat:"Cannot format a date from another calendar",missingNumberAt:"Missing number at position {0}",unknownNameAt:"Unknown name at position {0}",unexpectedLiteralAt:"Unexpected literal at position {0}",unexpectedText:"Additional text found at end"}),a.calendars.local=a.calendars.regionalOptions[""],a.extend(a.calendars.cdate.prototype,{formatDate:function(a,e){return"string"!=typeof a&&(e=a,a=""),this._calendar.formatDate(a||"",this,e)}}),a.extend(a.calendars.baseCalendar.prototype,{UNIX_EPOCH:a.calendars.instance().newDate(1970,1,1).toJD(),SECS_PER_DAY:86400,TICKS_EPOCH:a.calendars.instance().jdEpoch,TICKS_PER_DAY:864e9,ATOM:"yyyy-mm-dd",COOKIE:"D, dd M yyyy",FULL:"DD, MM d, yyyy",ISO_8601:"yyyy-mm-dd",JULIAN:"J",RFC_822:"D, d M yy",RFC_850:"DD, dd-M-yy",RFC_1036:"D, d M yy",RFC_1123:"D, d M yyyy",RFC_2822:"D, d M yyyy",RSS:"D, d M yy",TICKS:"!",TIMESTAMP:"@",W3C:"yyyy-mm-dd",formatDate:function(e,t,r){if("string"!=typeof e&&(r=t,t=e,e=""),!t)return"";if(t.calendar()!==this)throw a.calendars.local.invalidFormat||a.calendars.regionalOptions[""].invalidFormat;e=e||this.local.dateFormat;for(var n=(r=r||{}).dayNamesShort||this.local.dayNamesShort,o=r.dayNames||this.local.dayNames,s=r.monthNamesShort||this.local.monthNamesShort,i=r.monthNames||this.local.monthNames,c=r.localNumbers||this.local.localNumbers,l=function(a,t){for(var r=1;f+r<e.length&&e.charAt(f+r)===a;)r++;return f+=r-1,Math.floor(r/(t||1))>1},d=function(a,e,t,r){var n=""+e;if(l(a,r))for(;n.length<t;)n="0"+n;return n},h=function(a,e,t,r){return l(a)?r[e]:t[e]},y=c&&this.local.digits?this.local.digits:function(a){return a},m="",u=!1,f=0;f<e.length;f++)if(u)"'"!==e.charAt(f)||l("'")?m+=e.charAt(f):u=!1;else switch(e.charAt(f)){case"d":m+=y(d("d",t.day(),2));break;case"D":m+=h("D",t.dayOfWeek(),n,o);break;case"o":m+=d("o",t.dayOfYear(),3);break;case"w":m+=d("w",t.weekOfYear(),2);break;case"m":m+=y(d("m",t.month(),2));break;case"M":m+=h("M",t.month()-this.minMonth,s,i);break;case"y":m+=y(l("y",2)?t.year():(t.year()%100<10?"0":"")+t.year()%100);break;case"Y":l("Y",2),m+=t.formatYear();break;case"J":m+=t.toJD();break;case"@":m+=(t.toJD()-this.UNIX_EPOCH)*this.SECS_PER_DAY;break;case"!":m+=(t.toJD()-this.TICKS_EPOCH)*this.TICKS_PER_DAY;break;case"'":l("'")?m+="'":u=!0;break;default:m+=e.charAt(f)}return m},parseDate:function(e,t,r){if(null==t)throw a.calendars.local.invalidArguments||a.calendars.regionalOptions[""].invalidArguments;if(""===(t="object"==typeof t?t.toString():t+""))return null;e=e||this.local.dateFormat;var n=(r=r||{}).shortYearCutoff||this.shortYearCutoff;n="string"!=typeof n?n:this.today().year()%100+parseInt(n,10);for(var o=r.dayNamesShort||this.local.dayNamesShort,s=r.dayNames||this.local.dayNames,i=r.monthNamesShort||this.local.monthNamesShort,c=r.monthNames||this.local.monthNames,l=-1,d=-1,h=-1,y=-1,m=-1,u=!1,f=!1,p=function(a,t){for(var r=1;C+r<e.length&&e.charAt(C+r)===a;)r++;return C+=r-1,Math.floor(r/(t||1))>1},g=function(e,r){var n=p(e,r),o=[2,3,n?4:2,n?4:2,10,11,20]["oyYJ@!".indexOf(e)+1],s=new RegExp("^-?\\d{1,"+o+"}"),i=t.substring(k).match(s);if(!i)throw(a.calendars.local.missingNumberAt||a.calendars.regionalOptions[""].missingNumberAt).replace(/\{0\}/,k);return k+=i[0].length,parseInt(i[0],10)},b=this,D=function(e,r,n,o){for(var s=p(e,o)?n:r,i=0;i<s.length;i++)if(t.substr(k,s[i].length).toLowerCase()===s[i].toLowerCase())return k+=s[i].length,i+b.minMonth;throw(a.calendars.local.unknownNameAt||a.calendars.regionalOptions[""].unknownNameAt).replace(/\{0\}/,k)},A=function(){if(t.charAt(k)!==e.charAt(C))throw(a.calendars.local.unexpectedLiteralAt||a.calendars.regionalOptions[""].unexpectedLiteralAt).replace(/\{0\}/,k);k++},k=0,C=0;C<e.length;C++)if(f)"'"!==e.charAt(C)||p("'")?A():f=!1;else switch(e.charAt(C)){case"d":y=g("d");break;case"D":D("D",o,s);break;case"o":m=g("o");break;case"w":g("w");break;case"m":h=g("m");break;case"M":h=D("M",i,c);break;case"y":var N=C;u=!p("y",2),C=N,d=g("y",2);break;case"Y":d=g("Y",2);break;case"J":l=g("J")+.5,"."===t.charAt(k)&&(k++,g("J"));break;case"@":l=g("@")/this.SECS_PER_DAY+this.UNIX_EPOCH;break;case"!":l=g("!")/this.TICKS_PER_DAY+this.TICKS_EPOCH;break;case"*":k=t.length;break;case"'":p("'")?A():f=!0;break;default:A()}if(k<t.length)throw a.calendars.local.unexpectedText||a.calendars.regionalOptions[""].unexpectedText;if(-1===d?d=this.today().year():d<100&&u&&(d+=-1===n?1900:this.today().year()-this.today().year()%100-(d<=n?0:100)),m>-1){h=1,y=m;for(var w=this.daysInMonth(d,h);y>w;w=this.daysInMonth(d,h))h++,y-=w}return l>-1?this.fromJD(l):this.newDate(d,h,y)},determineDate:function(a,e,t,r,n){t&&"object"!=typeof t&&(n=r,r=t,t=null),"string"!=typeof r&&(n=r,r="");var o=this;return e=e?e.newDate():null,a=null==a?e:"string"==typeof a?function(a){try{return o.parseDate(r,a,n)}catch(a){}for(var e=((a=a.toLowerCase()).match(/^c/)&&t?t.newDate():null)||o.today(),s=/([+-]?[0-9]+)\s*(d|w|m|y)?/g,i=s.exec(a);i;)e.add(parseInt(i[1],10),i[2]||"d"),i=s.exec(a);return e}(a):"number"==typeof a?isNaN(a)||a===1/0||a===-1/0?e:o.today().add(a,"d"):o.newDate(a)}})}(jQuery);